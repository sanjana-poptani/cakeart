{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <title>Vendor | Home</title>
    <!-- HTML5 Shim and Respond.js IE10 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 10]>
		<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
		<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
		<![endif]-->
    <!-- Meta -->
    
    <!-- Favicon icon -->
    <link rel="icon" href="{% static '/vendors/images/favicon.ico' %}" type="image/x-icon">
    <!-- fontawesome icon -->
    <link rel="stylesheet" href="{% static '/vendors/fonts/fontawesome/css/fontawesome-all.min.css' %}">
    <!-- animation css -->
    <link rel="stylesheet" href="{% static '/vendors/plugins/animation/css/animate.min.css' %}">
    <!-- vendor css -->
    <link rel="stylesheet" href="{% static '/vendors/css/style.css' %}">

</head>

<body>
    <!-- [ Pre-loader ] start -->
    <div class="loader-bg">
        <div class="loader-track">
            <div class="loader-fill"></div>
        </div>
    </div>
    <!-- [ Pre-loader ] End -->

    <!-- [ navigation menu ] start -->
    <nav class="pcoded-navbar">
        <div class="navbar-wrapper">
            <div class="navbar-content scroll-div" style="font-size: 20px">
                    <ul class="nav pcoded-inner-navbar">
                            <li data-username="Manage lists" class="nav-item pcoded-hasmenu" style="color: black;">
                                <a href="javascript:" class="nav-link " style="color: white; "><span class="pcoded-micon" style="color: white"><i class="feather icon-box"></i></span><span class="pcoded-mtext" style="color: white;">Manage</span></a>
                                <ul class="pcoded-submenu">
                                    <li class="nav-item"><a href="javascript:" class="nav-link " style="color: white;"><span class="pcoded-micon"><i class="feather icon-box"></i></span><span class="pcoded-mtext">Orders</span></a>
                                        
                                    </li>
                                    <li class="nav-item"><a href="javascript:" class="nav-link " style="color: white;"><span class="pcoded-micon"><i class="feather icon-box"></i></span><span class="pcoded-mtext">Sales</span></a>
                                        
                                    </li>
                                    <li class="nav-item pcoded-hasmenu"><a href="javascript:" class="nav-link " style="color: white;"><span class="pcoded-micon"><i class="feather icon-box"></i></span><span class="pcoded-mtext">Products</span></a>
                                        <ul class="pcoded-submenu">
                                                <li class=""><a href="{% url 'addpro' %}" class="" style="color: white;">Add</a></li>
                                                <li class=""><a href="" class="" style="color: white;">Edit</a></li>
                                                <li class=""><a href="{% url 'showproduct11' %}" class="" style="color: white;">Place Order</a></li>
                                        </ul>
                                    </li>
                                    
                                </ul>
                            </li>
                            <li class="" data-username="View Lists"><a href="{% url 'cate' %}" style="color: white;"><span class="pcoded-micon" style="color: white;"><i class="feather icon-box"></i></span style="color: white;">View Categories</a>                       
                            </li>
                            <li class="nav-item pcoded-hasmenu"><a href="javascript:" class="nav-link " style="color: white;"><span class="pcoded-micon"><i class="feather icon-box"></i></span><span class="pcoded-mtext">View Reports</span></a>
                                <ul class="pcoded-submenu">
                                    <li class=""><a href="" class="" style="color: white;">Orders</a></li>
                                    <li class=""><a href="" class="" style="color: white;">Sales</a></li>
                                    <li class=""><a href="" class="" style="color: white;">Products</a></li>
                                </ul>
                            </li>
                       </ul>
            </div>
        </div>
    </nav>
    <!-- [ navigation menu ] end -->

    <!-- [ Header ] start -->
    <header class="navbar pcoded-header navbar-expand-lg navbar-light">
        <div class="collapse navbar-collapse">
            <ul class="navbar-nav mr-auto">
                <li><a href="javascript:" class="full-screen" onclick="javascript:toggleFullScreen()"><i class="feather icon-maximize"></i></a></li>
                </ul>
            <ul class="navbar-nav ml-auto">
                <li>
                    <div class="dropdown drp-user">
                        <a href="javascript:" class="dropdown-toggle" data-toggle="dropdown">
                            <i class="icon feather icon-settings"></i>
                        </a>
                        <div class="dropdown-menu dropdown-menu-right profile-notification">
                            <div class="pro-head">
                                <img src="{% static '/vendors/images/user/avatar-1.jpg' %}" class="img-radius" alt="User-Profile-Image">
                                <span>{% if all_cust %}
                                    {{all_cust.firstname}} </span>
                                <a href="{% url 'logout' %}" class="dud-logout" title="Logout">
                                    <i class="feather icon-log-out"></i>
                                </a>
                            </div>
                            <ul class="pro-body">
                                <li><a href="{% url 'reqpasswrd' %}" class="dropdown-item"><i class="feather icon-settings"></i>  Change Password </a></li>
                                <li><a href="{% url 'profile' pk=all_cust.id %}" class="dropdown-item"><i class="feather icon-user"></i> Profile</a></li>
                            </ul>
                            {% endif %}
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </header>
    <!-- [ Header ] end -->

    <!-- [ Main Content ] start -->
    <section class="pcoded-main-container">
        <div class="pcoded-wrapper">
            <div class="pcoded-content">
                <div class="pcoded-inner-content">
                    <!-- [ breadcrumb ] start -->
                    <div class="page-header">
                        <div class="page-block">
                            <div class="row align-items-center">
                                <div class="col-md-12">
                                    <div class="page-header-title">
                                        <h5 class="m-b-10">Products</h5>
                                    </div>
                                    
                                </div>
                            </div>
                        </div>
                    </div>
                    <script>
                            function clickevent(){
                                return confirm("Are you sure you want to delete?")
                            }
                            function callfn(){
                                far=clickevent();
                                if(far==true){
                                    alert("One item deleted successfully!!")
                                }
                            }
                    </script>
                    <!-- [ breadcrumb ] end -->
                                <!-- [ Hover-table ] start -->
                    <div class="col-xl-12">
                        <div class="card">
                            <div class="card-header">
                                <h3>Order Products</h3> 
                                <!-- <button type="submit" style="color: white;background: #3f4d67; font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif; font-style: bold; align-self: right;font-size: x-large;float: right;"> ðŸ›’ </button>              -->
                            </div>
                                <div class="table-responsive">
                                    <table class="table table-hover" id="form" style="width:100%">
                                        
                                        <thead style="font-family:'Times New Roman', Times, serif; font-size:x-large; color:black">
                                            <tr>
                                                <td style="text-align: center"> Product Image </td>
                                                <td style="width: 1px;"> Product Name </td>
                                                <td> Baker Name </td>
                                                <td> Product Price </td>
                                                <td> Qty </td>
                                                <td> Total </td>
                                                <td> Name over cake </td>
                                            </tr>
                                        </thead>
                                        <tbody class="totals-value" style="font-family:Arial, Helvetica, sans-serif ; font-size:large;">
                                            
                                            {% if allprod %}
                                                    {% for u in allprod %} 
                                                    <tr class="product">
                                                        <td> <img class="proimg" src="{{MEDIA_URL}}{{u.prodid.product_image.url}}" style=" border: 5px solid black;" height="200" width="200"></img>  </td>
                                                        <td><b><input type="hidden" name="pid" id="pid" value="{{u.prodid.id}}"/> 
                                                            <span class="pnm">{{u.prodid.product_name}} </span></b><br>
                                                            <textarea cols="10" rows="5" style="border: 0px;overflow: hidden; resize: none;" readonly>{{u.prodid.product_desc}}</textarea> 
                                                            <!-- jkdfkljsdlfskdflksdjfhsdklghfdkljhgfdkjlghfdkjkdlglhdfkhgdjfdklgjfgkhgkl -->
                                                        </td>
                                                        <td> <span> {{u.prodid.user_id.firstname}} </td>
                                                        <td> â‚¹<span class="firstNumber" id="prc" >{{u.prodid.product_price}} </span> </td>
                                                        <td> <input type="number" id="quantity" class="secondNumber" min="1" max="5000" class="qty" value="1" name="qty" /> </td>
                                                        <td>   â‚¹<span class="result" id="res">{{u.prodid.product_price}} </span> </td> 
                                                        <td><input type="text" name="namecake" id="nm"></td>
                                                        <td>
                                                                <form action="{% url 'deletecartobj' pk=u.id %}" name="frm" method="POST">
                                                                    {% csrf_token %}
                                                                    <input type="hidden" name="id" value="{{u.id}}">
                                                                    <input type="submit" name="del" data-toggle="tooltip" value="Delete" onclick="alert('Item deleted successfully!')">
                                                                </form> 
                                                        </td>
                                                            <!-- <input type="submit" value="Delete" class="product-removal" name="del"> </td> -->
                                                    </tr> 
                                                    {% endfor %}
                                            {% endif %}
                                            <tr>
                                                <td colspan="3">  Subtotal: </td>
                                                <td colspan="2"> â‚¹<span id="cart-subtotal" name="total"> </span> </td>
                                                <td colspan="2" rowspan="3"> <button style="color: white; background-color: black;font-size: x-large;" class="addtocrt"><a href="{% url 'viewcart' %}" style="color: white"> Checkout </a></button></td>
                                            </tr>
                                            <tr>
                                                <td colspan="3"> Tax(5%): </td>
                                                <td colspan="2"> â‚¹<span id="cart-tax"> </span> </td>
                                            </tr>
                                            <!-- <tr>
                                                <td colspan="3"> Shipping charge: </td>
                                                <td colspan="2"> â‚¹<span id="cart-shipping"> </span> </td>
                                            </tr>bk -->
                                            <tr>
                                                <td colspan="3"> Final Total: </td>
                                                <td colspan="2"> â‚¹<span id="cart-total"> </span> </td>
                                            </tr>
                                            

                                        </tbody>
                                    </table>
                                </div></div></div>
                                <!-- [ Hover-table ] end -->
                            <!-- [ Main Content ] end -->    
                </div></div>     </div> 
    </section>
    <!-- Required Js -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="{% static '/bakers/js/vendor-all.min.js' %}"></script>
<script src="{% static '/bakers/plugins/bootstrap/js/bootstrap.min.js' %}"></script>
<script src="{% static '/bakers/js/pcoded.min.js' %}"></script>
<script>
    $(document).ready(function(){
            // alert("Hello")
            $(".secondNumber").change(function(){
                // alert("Hii")
                // var tr=$(this).parent("td").parent("tr").parent("tbody");
                var tr=$(this).parent("td").parent("tr");
                // alert(tr.html())
                var pid=$(tr).find("#pid").val();
                var qty=$(tr).find("#quantity").val();
                var nm=$(tr).find("#nm").val();
                // alert(pid+" "+qty)
                // var rowtotal=$(tr).find("#res").html();
                // // alert("HERE")
                // alert(rowtotal)
                // var total=$("#cart-subtotal").text();
                // alert(total)
                // alert($(tr).parent().html())
                // var finaltotal=$(tr).parent().find("#cart-total").html();
                // alert(pid + " " + " " + qty + " " + subtotal + " " + total);
                // alert(finaltotal)
                $.ajax({
                    type:'GET',
                    dataType:'json',
                    url:"{% url 'checkout' %}",
                    data:{pid:pid,qty:qty,nm:nm},
                    success:function(status)
                    {
                        // alert("Into success" + status);
                    },
                    error:function(err)
                    {
                        alert(err.statusText)
                    }
                });
            })
        })
</script>
<script type="text/javascript">
    
    
/* Set rates + misc */
var taxRate = 0.05;
var shippingRate = 0;
var fadeTime = 300;


/* Assign actions */
$('.secondNumber').change(function () {
    // alert("called");
    updateQuantity(this);
    // alert($(this).val());
});

$('.product-removal').click(function () {
    // alert("called");
    removeItem(this);
});


/* Recalculate cart */
function recalculateCart()
{
  var subtotal = 0;

  /* Sum up row totals */
  $('.product').each(function () {
    subtotal += parseFloat($(this).children().children('.result').html());
    // alert($(this).children().children('.result').text())
  });

  /* Calculate totals */
  var tax = subtotal * taxRate;
  var shipping = subtotal > 0 ? shippingRate : 0;
  var total = subtotal + tax + shipping;

  /* Update totals display */
  $('.totals-value').fadeOut(fadeTime, function () {
    $('#cart-subtotal').html(subtotal.toFixed(2));
    $('#cart-tax').html(tax.toFixed(2));
    $('#cart-shipping').html(shipping.toFixed(2));
    $('#cart-total').html(total.toFixed(2));
    if (total == 0) {
      $('.checkout').fadeOut(fadeTime);
    } else {
      $('.checkout').fadeIn(fadeTime);
    }
    $('.totals-value').fadeIn(fadeTime);
  });
}


/* Update quantity */
function updateQuantity(quantityInput)
{
  /* Calculate line price */
  var productRow = $(quantityInput).parent().parent();
//   alert(productRow.html());
  var price = parseFloat(productRow.children().children('.firstNumber').html());
//   alert(price);
  var quantity = $(quantityInput).val();
  
  var linePrice = price * quantity;
//   alert(quantity);

  /* Update line price display and recalc cart totals */
  productRow.children().children('.result').each(function () {
    $(this).fadeOut(fadeTime, function () {
      $(this).html(linePrice.toFixed(2));
      recalculateCart();
      $(this).fadeIn(fadeTime);
    });
  });
}


/* Remove item from cart */
function removeItem(removeButton)
{
  /* Remove row from DOM and recalc cart total */
  var productRow = $(removeButton).parent().parent();
  productRow.slideUp(fadeTime, function () {
    productRow.remove();
    recalculateCart();
  });
}



//# sourceURL=pen.js
    

    // function caltotal()
    // {
    //     // alert("1")
    //     num1 = document.getElementById("firstNumber").innerHTML;
    //     num2 = document.getElementById("secondNumber").value;
//     $(document).ready(function() {
   
    // $(document).ready(function() {
    //     alert("Hello")
	//     function compute() {
    //       var a = $('.firstNumber').html();
    //       var b = $('.secondNumber').val();
    //       var total = a * b;
    //       $(this).parent().parent().find('.result').text(''+total);
    //       alert($(this).parent().parent().find('.result').html())
    //     }

    //     $('.secondNumber').change(compute);
		
	// });

    // $(document).ready(function(){
    //         $(".addtocrt").click(function(){
    //             var tr=$(this).parent().parent();
    //             // alert(tr.html())
    //             var pid=$(tr).find("#pid").val();
    //             var price=$(tr).find("#pprice").text();
    //             // alert(price+" "+pid)
    //            $.ajax({
    //                 type:'GET',
    //                 dataType:'json',
    //                 url:"{% url 'addtocart' %}",
    //                 data:{pid:pid,price:price},
    //                 success:function(status)
    //                 {
    //                     alert("Into success" + status);
    //                 },
    //                 error:function(err)
    //                 {
    //                     alert("error" + err.statusText);
    //                 }
    //             });
    //         })
    //     })
</script>

</body>
</html>
